<!DOCTYPE html>
<html lang="en">

<head>
  <title>Filter Orders</title>

  <!-- icon -->
  <link rel="icon" href="/images/logo.png" type="image/x-icon" />

  <!-- Source Sans Pro  300, 600, italic of each -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Bungee&family=Source+Sans+Pro:ital,wght@0,300;0,600;1,300;1,600&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="/vendor/normalize-4.1.1.css" type="text/css" />
  <link rel="stylesheet" href="/vendor/border-box.css" type="text/css" />
  <link rel="stylesheet" href="/styles/layout.css" type="text/css" />
  <link rel="stylesheet" href="/styles/header.css" type="text/css" />
  <link rel="stylesheet" href="/styles/filter-orders.css" type="text/css" />

  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

  <script type="text/javascript" src="/vendor/jquery-3.0.0.js"></script>
  <script type="text/javascript" src="/scripts/app.js"></script>

  <script type="text/javascript" src="/scripts/utilities.js"></script>
  <script type="text/javascript" src="/scripts/filter-orders.js"></script>
</head>

<body>
  <%- include('partials/_header') %>
  <main>
    <div id="filter-orders-page">
      <div class="manage-part">
        <div class="m-title">
          <h2>Management-Tab</h2>
        </div>
        <div class="right-m-tab">
          <div class="form-input">
            <form id='filtering' action="/orders/filter-orders" method="POST">
              <label for="userId">Customer Id:</label>
              <input type="text" name="userId" id="userId" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*?)\..*/g, '$1');" />
              <br><br>

              <label for="status">Status:</label>
              <select name="status" id="status">
                <option value="" selected disabled hidden>----- any ------</option>
                <% for (const option of status) { %>
                  <option value=<%= option.name %>><%= option.name %></option>
                <% } %>
              </select>

              <br><br>

              <label for="orderDate">Order date:</label>
              <input type="date" id="orderDate" name="orderDate">

            </form>
          </div>
          <div class="form-submit">
            <input type="submit" value="Submit" form="filtering">
            <input type="submit" value="Reset" id="reset-filtering" form="filtering">
          </div>
        </div>
      </div>
      <div class="orders-table">
        <h2>List of Orders</h2>
        <div class="data-table">
          <div class="show-detail">
            <span>---------</span>
          </div>
          <div class="order-number">
            <span>Order Number</span>
          </div>
          <div class="date">
            <span>Date</span>
          </div>
          <div class="customer">
            <span>Customer Id - Name</span>
          </div>
          <div class="total">
            <span>Total</span>
          </div>
          <div class="status">
            <span>Status</span>
          </div>
        </div>
        <% for (const order of orders) { %>
          <div class="data-table">
            <div class="show-detail">
              <button class="order-details" name="select-order"  value="<%= order.order_id %>">Show Detail</button>
            </div>
            <div class="order-number">
              <span><%= order.order_id %></span>
            </div>
            <div class="date">
              <span><%= order.date %></span>
            </div>
            <div class="customer">
              <span><%= order.customer_id %> - <%= order.customer_name %></span>
            </div>
            <div class="total">
              <span>$<%= order.total / 100 %></span>
            </div>
            <div class="status">
              <span><%= order.status %></span>
            </div>
          </div>
          <div id="detailContainer<%= order.order_id %>" class="detail-table">
          </div>
        <% } %>
      </div>
    </div>
  </main>
</body>
</html>
